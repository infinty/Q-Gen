<!DOCTYPE html>
<!-- saved from url=(0038)https://v3.bootcss.com/examples/cover/ -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="https://cdn.jsdelivr.net/npm/@bootcss/v3.bootcss.com@1.0.12/favicon.ico">
    <link rel="canonical" href="https://getbootstrap.com/docs/3.4/examples/cover/">

    <title>试题生成器</title>

    <!-- Bootstrap core CSS -->
    <link href="./index_2_files/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="./index_2_files/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./index_2_files/cover.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/@bootcss/v3.bootcss.com@1.0.12/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="./index_2_files/ie-emulation-modes-warning.js.下载"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="site-wrapper">

      <div class="site-wrapper-inner">

        <div class="cover-container">

          <div class="masthead clearfix">
            <div class="inner">
              <nav>
                <ul class="nav masthead-nav">
                  <li class="active"><a href="index_2.html">古诗</a></li>
                  <li><a href="word.html">单词默写</a></li>
                  <li><a href="math.html">数学</a></li>
                </ul>
              </nav>
            </div>
          </div>

          <div class="cover">
            <h1 class="cover-heading">输入古诗</h1>
            <form id="form-poem"> 
              <div class="form-group">
                <label for="exampleInputEmail1">作者</label>
                <input type="text" name="writer" class="form-control" id="exampleInputEmail1" placeholder="如：李白">
              </div>
              <div class="form-group">
                <label for="exampleInputEmail1">标题</label>
                <input type="text" name="title" class="form-control" id="exampleInputEmail1" placeholder="如：静夜思">
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1">正文</label>
                <textarea name = "content" class="form-control"></textarea>
              </div>
              <div class="form-group">
                <input type="submit" name="submit" value="提交" id="g">
              </div>
            </form>
          </div>
          <br>
          <br>

          <div class ="inner cover">
            <p class="lead">
              <a href="https://v3.bootcss.com/examples/cover/#" class="btn btn-lg btn-default" id = "startBtn">开始出题 题型1</a>
            </p>
            <h1 class="cover-heading">答题区</h1>
            <div>
              <p id = "prev"></p>
            </div>
            <div>
              <label for="basic-url">输入你的答案：</label>
              <div>
                <input id="ans-area" type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
              </div>
            </div>
            <div>
              <p id = "next"></p>
            </div>
            <div class="form-group">
              <input id ="submit-ans" class="btn btn-default" type="submit" value="提交答案">
            </div>
          </div>
          <br>
          <br>

          <div class ="inner cover">
            <p class="lead">
              <a href="https://v3.bootcss.com/examples/cover/#" class="btn btn-lg btn-default" id = "startBtn2">开始出题 题型2</a>
            </p>
            <h1 class="cover-heading">答题区</h1>
            <div>
              <p id = "randomAuthor"></p>
            </div>
            <div>
              <p id="checkbox1"></p>
              <p id="checkbox2"></p>
              <p id="checkbox3"></p>
              <p id="checkbox4"></p>
            </div>
            <div>
              <label for="basic-url">输入你的答案：</label>
              <div>
                <input id="select-area" type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
              </div>
            </div>
            <br>
            <div class="form-group">
              <input id ="submit-ans2" class="btn btn-default" type="submit" value="提交答案">
            </div>
          </div>
          <br>
          <br>
          <br>
          <br>
          <br>
          <div class="mastfoot">
            <div class="inner">
              <p>by infinty</p>
            </div>
          </div>

        </div>

      </div>

    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./index_2_files/jquery.min.js.下载" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="https://cdn.jsdelivr.net/npm/@bootcss/v3.bootcss.com@1.0.12/assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="./index_2_files/bootstrap.min.js.下载"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./index_2_files/ie10-viewport-bug-workaround.js.下载"></script>
    <script type = "text/JavaScript">
    
        var startSelector = "#startBtn";
        var startSelector2 = "#startBtn2";
        var articleSelector = "#article";
        var prevSelector = "#prev";
        var nextSelector = "#next";
        var submitAnsSelector = "#submit-ans";
        var submitAnsSelector2 = "#submit-ans2"; 
        var poems_data = [];
        

        $("form").submit(function(e){
          e.preventDefault();
          poems = $(this).serializeArray();
          
          var data = {};

          $.each(poems, function(index,item){
            data[item.name] = item.value;
          });
          var json = JSON.stringify(data);
          poems_data.push(data);
          console.log(poems_data);
        });



        var correctAnswer;


        $(startSelector).click(function (e) { 
          e.preventDefault();
          var randomIdx = Math.floor(poems_data.length * Math.random());
          console.log(randomIdx);
          var poem = poems_data[randomIdx];
          var poemContent = poem.content;
          poemContent = poemContent.replace(/[\r\n]/g, '')
          var contentArr = poemContent.split(/,|，|。|\s+/);
          if(contentArr[contentArr.length - 1] == ""){
            contentArr.pop();
          }
          console.log(contentArr);

          $(nextSelector).text("");
          $(prevSelector).text("");



          var randomSentenceIdx = Math.floor(contentArr.length * Math.random());
          var thisSentence = contentArr[randomSentenceIdx];

          if(randomSentenceIdx % 2 == 1){
            correctAnswer = contentArr[randomSentenceIdx - 1];
            $(nextSelector).text("下一句： " + thisSentence);

          }else{
            
            correctAnswer = contentArr[randomSentenceIdx + 1];
            $(prevSelector).text("上一句： " + thisSentence);
          }

          $(submitAnsSelector).click(function(e){
            if($("#ans-area").val() == correctAnswer){
              alert("回答正确");
            }else{
              alert("回答错误");
            }
          })

          
        });
        
        var correctNum = -1;

        $(startSelector2).click(function(e){
          e.preventDefault();
          var chooseData = {};
          var randomIdx = Math.floor(poems_data.length * Math.random());
          var author = poems_data[randomIdx].writer;
          $("#randomAuthor").text("下列哪句诗的作者是："+ author);

          var poemContent = poems_data[randomIdx].content;
          
          chooseData.correct = getRandomSentence(poemContent);
          chooseData.other = getOtherSentences(3,author);
          console.log(chooseData);

          var randomId = Math.floor(Math.random() * 4 + 1);
          correctNum = randomId;
          var idStr = "#checkbox" + randomId;
          $(idStr).text(chooseData.correct);
          for(var i = 1; i <= 4; i++){
            if(i == randomId) continue;
            var idStr = "#checkbox" + i;
            $(idStr).text(chooseData.other.pop());
          }
        })


        function getRandomSentence(poemContent){
          poemContent = poemContent.replace(/[\r\n]/g, '');
          var contentArr = poemContent.split(/,|，|。|\s+/);
          if(contentArr[contentArr.length - 1] == ""){
            contentArr.pop();
          }
          var randomSentenceIdx = Math.floor(contentArr.length * Math.random());
          return contentArr[randomSentenceIdx];
        }

        function getOtherSentences(num, author){
          res = [];
          var cnt = 0;
          while(cnt < num){
            var randomIdx = Math.floor(poems_data.length * Math.random());
            if(author == poems_data[randomIdx].writer){
              continue;
            }
            var poemContent = poems_data[randomIdx].content;
            if(res.indexOf(poemContent) == -1){
              res.push(getRandomSentence(poemContent));
              cnt++;
            }
          }
          return res;
        }

        $(submitAnsSelector2).click(function (e){
          
          e.preventDefault();
          if(correctNum == -1){
            alert("请先出题");
          }else if(parseInt($("#select-area").val()) == correctNum){
            alert("回答正确");
          }else{
            alert("回答错误");
          }

          correctNum = -1;
        
        })
    </script>

</body></html>